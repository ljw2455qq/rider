<!-- gps-uploader.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>GPS 업로드</title>
</head>
<body>
  <h3>GPS 전송 중...</h3>
  <div id="status">위치 대기 중</div>

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_APP.firebaseapp.com",
      databaseURL: "https://YOUR_APP.firebaseio.com",
      projectId: "YOUR_APP",
      storageBucket: "YOUR_APP.appspot.com",
      messagingSenderId: "123456789",
      appId: "1:123456789:web:abcdef"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function sendLocation(lat, lng) {
      db.ref('location').set({ lat, lng, timestamp: Date.now() });
      document.getElementById('status').innerText = `위치 전송됨: ${lat}, ${lng}`;
    }

    if (navigator.geolocation) {
      navigator.geolocation.watchPosition(pos => {
        const lat = pos.coords.latitude;
        const lng = pos.coords.longitude;
        sendLocation(lat, lng);
      }, err => {
        document.getElementById('status').innerText = '오류: ' + err.message;
      }, {
        enableHighAccuracy: true,
        maximumAge: 2000,
        timeout: 10000
      });
    } else {
      document.getElementById('status').innerText = 'GPS 지원 안 됨';
    }
  </script>
</body>
</html>
