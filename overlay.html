<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>OBS 오버레이</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <!-- firebase.js 파일을 동일한 폴더에 두거나 경로를 수정해야 합니다. -->
    <script src="firebase.js"></script>
    <style>
        body { margin: 0; padding: 0; background: transparent; font-family: sans-serif; }
        #overlay { 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            background: rgba(0,0,0,0.5);
            color: white; 
            font-size: 24px; 
            padding: 10px 20px; 
            border-radius: 10px;
        }
        span { margin: 0 15px; }
    </style>
</head>
<body>
    <div id="overlay">
        <span id="dailyText">일 수익: -</span>
        <span id="weeklyText">주 수익: -</span>
        <span id="monthlyText">월 수익: -</span>
    </div>

    <script>
        // 숫자를 천 단위 쉼표로 포맷하고 '원'을 붙여주는 함수
        function formatCurrency(number) {
            // 숫자가 유효하지 않으면 '-'를 반환
            if (typeof number !== 'number') return '-';
            // toLocaleString()을 사용해 천 단위 쉼표를 자동으로 추가
            return `${number.toLocaleString()}원`;
        }

        // Firebase 데이터 업데이트
        db.ref('overlayData').on('value', (snapshot) => {
            let data = snapshot.val();
            if (data) {
                document.getElementById('dailyText').textContent = `일 수익: ${formatCurrency(data.daily)}`;
                document.getElementById('weeklyText').textContent = `주 수익: ${formatCurrency(data.weekly)}`;
                document.getElementById('monthlyText').textContent = `월 수익: ${formatCurrency(data.monthly)}`;
            }
        });
    </script>
</body>
</html>
