<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>OBS 오버레이</title>

<!-- Firebase 8.x SDK -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
<script src="firebase.js"></script>

<style>
    body{
        margin:0;
        padding:0;
        background:transparent;
        font-family:-apple-system, BlinkMacSystemFont,
            "Segoe UI", Roboto, "Noto Sans KR",
            sans-serif;
    }
    #overlay{
        display:flex;
        justify-content:center;
        align-items:center;
        background:rgba(0,0,0,.5);
        color:white;
        font-size:24px;
        padding:10px 20px;
        border-radius:10px;
    }
    #overlay span{ margin:0 15px; }
</style>
</head>

<body>
<div id="overlay">
    <span id="dailyText">일 수익: -</span>
    <span id="weeklyText">월 수익: -</span>
    <span id="monthlyText">년 수익: -</span>
</div>

<script>
/**
 * 숫자를 천 단위마다 콤마를 넣어 포맷합니다.
 * 예) 1234567 → "1,234,567"
 */
function formatNumber(value) {
    // 정수값이 아니면 그대로 반환
    if (isNaN(value)) return value;
    // Intl.NumberFormat 사용(간단하고 국제화 지원)
    return new Intl.NumberFormat('ko-KR').format(Math.round(value));
}

db.ref('overlayData').on('value', (snapshot) => {
    const data = snapshot.val();
    if(data){
        document.getElementById('dailyText')
            .textContent   = `일 수익: ${formatNumber(parseInt(data.daily, 10))}`;
        document.getElementById('weeklyText')
            .textContent  = `월 수익: ${formatNumber(parseInt(data.weekly, 10))}`;
        document.getElementById('monthlyText')
            .textContent = `년 수익: ${formatNumber(parseInt(data.monthly, 10))}`;
    }
});
</script>
</body>
</html>
